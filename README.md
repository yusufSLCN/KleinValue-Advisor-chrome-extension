# KleinValue Advisor

AI-powered Chrome extension for analyzing Kleinanzeigen listings with Google Gemini, OpenAI GPT-4o/4.1, and Anthropic Claude. The extension injects a valuation UI directly into listings, augments search results, and ships with a modern dashboard plus settings surface for multi-provider management.

> **Status:** Actively iterated. Automated tests are scheduled for a future milestone; build tooling is ready today.

## Table of Contents

1. [Highlights](#highlights)
2. [Screens & Modules](#screens--modules)
3. [Getting Started](#getting-started)
4. [Configuration](#configuration)
5. [Available Scripts](#available-scripts)
6. [Structure & Assets](#structure--assets)
7. [Tech Stack](#tech-stack)
8. [Roadmap](#roadmap)
9. [Contributing](#contributing)
10. [License](#license)

## Highlights

- **Multi-provider AI studio:** Hot-swap between Gemini, GPT-4o/4.1, and Claude 3.5 with dedicated key/model storage and live catalog fetching.
- **Vision-first valuations:** Pulls listing images, runs multimodal prompts, and surfaces structured price, confidence, and reasoning.
- **Search & dashboard integration:** Shows cached AI estimates inline on Kleinanzeigen search results and in an analytics dashboard with filters and stats.
- **Cost & transparency:** Displays provider costs, token usage, and confidence for every run so users know when to trust or renegotiate.
- **Modern toolchain:** Webpack + Babel bundling, Prettier formatting, and environment-ready configuration to keep the codebase healthy as it grows.

## Screens & Modules

| Surface               | Description                                                                                                      |
| --------------------- | ---------------------------------------------------------------------------------------------------------------- |
| **Listing injection** | Adds an "ğŸ¤– Analyze with AI" entry point, displays the latest valuation, and shows cost & reasoning on demand.   |
| **Search assist**     | Annotates Kleinanzeigen search results for items already analyzed (with bargain highlighting).                   |
| **Dashboard**         | Grid of analyzed items with search, statistics toggle, and per-item removal.                                     |
| **Settings**          | Gradient-rich provider studio with API key entry, live model refresh, analysis controls, and automation toggles. |
| **Popup**             | Quick glance list of recent valuations plus shortcuts to dashboard/settings.                                     |

## Getting Started

```bash
git clone https://github.com/yusufSLCN/KleinValue-Advisor-chrome-extension.git
cd kleinvalue-advisor
npm install
npm run build
```

Load the generated bundle at `chrome://extensions` using **Load unpacked** (ensure Developer Mode is enabled).

## Configuration

All provider keys are entered and stored inside the extension settings UI. There is no `.env` file to maintain because the extension never reads environment variables at runtime; keep secrets in your browser profile or a secrets manager for CI packaging.

## Available Scripts

| Command                | Description                                         |
| ---------------------- | --------------------------------------------------- |
| `npm run dev`          | Development build with watch mode.                  |
| `npm run build`        | Production bundle used for packaging the extension. |
| `npm run format`       | Prettier auto-format for JS/HTML/CSS/JSON/Markdown. |
| `npm run format:check` | Prettier in read-only mode for CI.                  |

Automated tests will arrive in a future release (`npm test` is intentionally omitted for now).

## Structure & Assets

### Code Layout

```
â”œâ”€â”€ background.js
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ analyze-button.js
â”‚   â”œâ”€â”€ data-extractor.js
â”‚   â””â”€â”€ estimate-ui.js
â”œâ”€â”€ content.js
â”œâ”€â”€ content-search.js
â”œâ”€â”€ dashboard.(html|css|js)
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ estimation-core.js
â”‚   â”œâ”€â”€ estimator-factory.js
â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”œâ”€â”€ metadata.js
â”‚   â”‚   â””â”€â”€ registry.js
â”‚   â”œâ”€â”€ storage-manager.js
â”‚   â””â”€â”€ {anthropic,gemini,openai}-estimator.js
â”œâ”€â”€ popup.(html|css|js)
â”œâ”€â”€ settings.(html|css|js)
â”œâ”€â”€ dev/
â”‚   â””â”€â”€ deployment.md
â”œâ”€â”€ dist/
â”œâ”€â”€ utils.js
â”œâ”€â”€ webpack.config.js
â”œâ”€â”€ app_icon.png
â””â”€â”€ 440851db-7bc4-4ccc-b508-ffb208d2f49a.png
```

- `content/` holds the modularized content script pieces that inject UI, extract listing data, and dispatch estimations.
- `lib/` centralizes estimator implementations, provider metadata/registry wiring, and `storage-manager` abstractions shared across extension surfaces.
- `dev/` contains deployment docs (currently `deployment.md`) outlining store submission prep.
- `dist/` is generated by `npm run build` and is the only folder you ship to Chrome Web Store along with `manifest.json` and static HTML/CSS.
- `app_icon.png` and the additional PNG act as base art for deriving Chrome Web Store icons/screenshots.

### Store & Promo Assets

- Maintain icon derivatives at 16/32/48/128 px (PNG with transparent background). Base them on `app_icon.png` for brand consistency and reference the detailed checklist in `dev/deployment.md`.
- Capture at least three 1280Ã—800 (or 640Ã—400) screenshots: popup, dashboard, and on-page analysis states. Keep Kleinanzeigen content anonymized or blurred.
- Prepare a short description (<132 characters) and a longer narrative describing multi-provider AI analysis, as outlined in the "Store Listing Content" section of `dev/deployment.md`.
- Keep editable design sources (Figma/PSD) alongside the PNGs locally so icon/screenshot refreshes stay painless when the UI evolves.

## Tech Stack

- **Build:** Webpack 5 + Babel.
- **Language:** Modern JavaScript (ES2021) bundled for Manifest V3.
- **Styling:** Plain CSS with intentional gradients and responsive layouts.
- **AI Providers:** Google Gemini (`@google/genai`), OpenAI REST API, Anthropic REST API.
- **Storage:** Chrome `storage.local` abstractions via `lib/storage-manager`.

## Roadmap

- [ ] Automated unit tests for estimator core & storage manager.
- [ ] Continuous integration (GitHub Actions) running `format:check` and `build`.
- [ ] Optional env-driven secrets for CI packaging.
- [ ] Polish on popup/dashboard animations.

## Contributing

See [CONTRIBUTING.md](CONTRIBUTING.md) for local setup, coding standards, and commit guidelines, and review the [Privacy Policy](PRIVACY_POLICY.md) before distributing the bundle. In short:

1. Fork & branch (`feat/<short-description>`).
2. Run `npm run format:check` (and optionally `npm run build`) before pushing.
3. Submit a PR with screenshots/GIFs for UI changes.

## License

This project is distributed under the [MIT License](LICENSE).

---

**Made with â¤ï¸ for Kleinanzeigen buyers who want data-driven decisions.**
